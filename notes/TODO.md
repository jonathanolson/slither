
- PhET bugginess:
  - How to get text entry (DOM node?) - can we focus it on detecting a click? NO we NEED to pass events through
  - Get CAG fixed, using Alpenglow's robust option
    - Get alpenglow into a usable state in phet-lib

- Current code TODOs
  - Bug: solver iteration limit
    - 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
  - 
  - 
  - Priorities:
    - 
    - Set up MSI laptop with generation?
    - 
    - [performance] Share BoardPatternBoards when solving --- even... potentially deserialize the board to the same thing?
      - We are also (a) leaking memory, and (b) computing a ton of unneeded embeddings
    - 
    - Difficulties based on patterns(!!!!!)
    - Generate puzzles and measure pattern frequency
      - STORE puzzles based on which patterns they require, and generate a TON
        - THUS have library of puzzles that "require" certain patterns
      - Are empty face values correlated with difficulty?
        - !! Removing a face value MIGHT make it easier, due to highlander rules?
    - "Hint" button should swap to "apply"?
    - 
    - Auto-solve
      - Auto-solve INTO history (in the future), animate out
        - Store index to "auto solve satisfied"
      - make basic auto solve actions (auto-do):
        - ____ How to handle, do we only do "face" auto-solve on "edge" changes?
          - E.g. lines + colors, would this be... applying both?
        - color mode changes => line changes
        - line changes => color mode changes
        - ... how to auto solve sectors?
          - Clear all sectors when erased
      - Auto-solve animated (optional, speed control)
        - (option) undo goes back to either last user move OR undoes last auto solver move (AND DOES NOT AUTO SOLVE AFTER)
        - (option?) way to play/pause the animation
        - IF interrupted with additional actions:
          - keep recorded "what user action and auto solve actions are not yet complete"
          - Include those actions in the "delta" of what changed for the auto-solver dirty check
        - Visual indicator (??) of "autosolve pending on delay, or in progress"
        - Apply animation to the "Solve" button too (it should just auto-solve but with the wider array of patterns
          - OR if using the SAT solver... uhhh, maybe use our patterns intelligently first and THEN use SAT solver edges?
          - HOW TO ORDER?
      - Auto-solve error detected:
        - Find minimal reproduction (to one OR all independent errors)
        - Make actions up to AND INCLUDING these errors.
        - (it will get highlighted using the main "error visualization" settings)
        - Can we store what patterns "relied" on, so that we can see what is "minimal"?
      - Auto-solve patterns:
        - Allow arbitrary rule inclusions
        - (fix BoardPatternBoard embeddings leak!)
      - Pattern Solver handles "dirty" fully (do not give actions that aren't based on what changed)
        - Enumerate pattern+embedding IN ORDER if there are no changes, so we can list out pattern matches
      - NO auto-solve actions on view mode switches(?)
      - Allow changing sectors to arbitrary states, perhaps toggle support like edges?
      - Auto-Solve options are PER VIEW MODE(?), with a global on/off control?
      - [feature] "Check Solution" button?
        - a: has errors
        - b: no errors, but incomplete
        - c: solved!
      - [feature] Auto-solve delayed start (maybe) (optional)
    - 
    - Find "forced color bridge" regions
    - 
    - Embedding improvements soon.
    - Show changelog in settings/info somewhere
    - Tabs for Settings (semi like PhET preferences, but evenly space, and make bottom larger, AND change color of highlighted section text to match bottom color)
      - Add descriptions for settings underneath (indented), so it is more explained
      - Show previews for all themes(!)
    - 
    - ****** FIX THE NOT SAVING STATE
      - indexeddb?
    - ** FIX THE CRASHING (don't leak memory with hints)
    - 
    - Limit number of patterns based on difficulty criteria? (faster load and search)
    - 
    - [nowayjay] - BLUR the outside section of the puzzle when a hint is visible. Clicking on it will dismiss the hint.
    - [nowayjay] - Pattern Play - shows the "before", you need to guess the "after"
    - 
    - Memory - web-worker the scanURL bits?
    - 
    - Tooltips:
      - Long-press tooltips
      - Show tooltips on disabled buttons
      - [nowayjay] tooltips usually under cursor!!!! fix this
    - 
    - Generate the "next" puzzle in the background (so it is ready when the user solves)
      - Allow opt in or out, setting
      - display in gen dialog if open
      - only undo if parameter change
    - Show a "next" dialog or something when the user solves the puzzle
    - Cancel button on generation
    - Close generation aborts generation
    - 
    - TODO: make sure our entire puzzle isn't too small that the no-loop thing would cause an error
    - 
    - [nowayjay] Share icon better
    - 
    - [nowayjay] Have numbers adjust highlighting based on color duals OR edges (implies either)
      - OR just... force color=>edge solving on color-only mode
    - 
    - [gereleth] Drag lines
      - (line drawing + left click on a line = erase lines/x's)
      - Dragging line should "tree branch" out, ideally not overlapping, CAN REVERSE
      - May want to separate "hit" areas a bit, to prevent accidental bits?
      - Compatibility with pan/zoom:
        - Modes:
          - Pan-only (old style)
          - Drag lines
          - Hybrid.... how? delays?
            - Middle mouse to pan... but what on mobile?
        - Minimap (draggable?)
        - ARROW KEYS? (SC2 style)
    - 
    - [gereleth] Tabbing out (work in background) for puzzle generation
      - How to signal this for the browser?
      - Maybe... also just pregenerate a bunch of puzzles?
    - 
    - Multiple modes:
      - draw-only (drag) - pan/zoom with two fingers
      - hybrid (delay?)
      - pan-only
    - 
    - HELP / INFO / INSTRUCTIONS button/section
      - Add to play AND rule explorer! 
      - Link to the main puzzle guide (main)
      - [shared with doc/index] Add notes for how to use the UI for everything
    - 
    - Doc/index:
      - Fix "touch override" on index page, allow scrolling on examples.
      - Write up "topological simplification"
      - Show the "no 1 or 3 or 4 lines per dot"
      - [nowayjay] Doc examples bigger (hard to see), resize based on screen size (perhaps dynamically)
        - [bug] broken layout on hone
      - [nowayjay] Multi-page and/or table of contents (better navigation basically)
      - GIVE EXAMPELS of all solving techniques
    - 
    - "Wrapping" (toroidal) puzzles, infinite, with DAG handling
    - 
    - Get Alpenglow CAG working... we could use it ALL OVER THE PLACE
    - 
    - Search pattern database by "draw a pattern and check for matches"!!!
    - 
    - Bug: rule explorer layout on phone is horrible
    - Bug: generation 2x2 when it creates a single loop around a face (e.g. 4 in square)
    - Bug: pattern solvers when there is a legitimate small loop
    - Bug: Fix puzzles in localStorage, having it lose progress is not cool
    - 
    - UI: Increase touch area for puzzle size buttons
      - Nope, just make the buttons bigger...
    - UI: Cancel generation button
    - UI: [nowayjay] colorblind-friendly color+opposite patterns
      - Reversed textures on/off or light/dark ness
        - have a foreground and background
      - HE wants letters
    - UI: [nowayjay] style sectors
      - Two radii, solid/dash, colors, potential "unshade colors" behind sectors
      - SEE IMAGE FROM START OF TRIP
    - UI: when highlighting a color, also minorly highlight the opposite color
    - UI: Better "solved" view (more indicative and prettier/more satisfying)
    - UI: Customizing ANY modes
      - Allow ghost lines (white edges) on classic mode
      - Allow dots on standard
      - Basically, we could even let users store their own modes?
    - UI: "same color" operation should be a "copy" in an error condition:
      - Face "copy" color operation, order matters. source => target
    - Performance: [nowayjay] disable animation during puzzle generation
    - 
    - PWA web app for it (for offline use)
    - 
    - Tutorial:
      - simplest example first
    - 
    - Fix (quickly) the Face Value display (static/remaining/ratio), so it can be more visible up top
      - Get ComboBox working with phet-lib working nicely.
    - Index page slow to load
    - Get short shareable puzzle URLs (short code for tiling + params for board, fall-back to board serialization, and list face values in order)
      - For state... solve this incrementally:
        - Apply safe solvers, only store delta between them?
          - For each action, apply safe-solve after it (to rule out potential states?)
      - SERIALIZATION IMPROVEMENTS:
        - (for good serialization, store the face values in the SAME visual order ())
          - top "row" first, left-to-right, then next row, etc.
          - Use epsilons for face centroid comparisons to see what rows we have? (or do an almost-imperceptible rotation, then just inspect Y?)
    - Solver bits:
      - Region (it's the most-often used one)
      - Low-depth backtrack? (with current things + regions + patterns, we handle everything, stop making tiny solvers)
        - Examine all cases, see what uses "less difficulty" (simpler rules)
        - Include difficulty from solvers
    - Annotation display improvements (better explanations)
      - Themify! Text for descriptions (NEED RICH TEXT ideally)
    - Puzzle Editor (separate... page?)
      - Highlight the "forced parts of the solution" when creating?
      - Ability to "auto-complete" faces, ... or other bits?
      - Zoomable (and standard interface)
      - Select a face, and:
        - -/./spacebar => clear
        - number to place a number?
        - Delete face?
    - Bolder colors in face-color-only mode?
    - Undo/redo larger (and at the bottom, with edit modes?)
    - "Automatic" auto-solve icon
    - phet-lib:
      - Use hotkey system that is new (bleh, this does NOT work well with ctrl-z and ctrl-shift-z - latter bugs it up)
      - GET IT WORKING WITH d.ts FILES!!!
  - 
  - 
  - Edit modes (row for all of this?):
    - Modes:
      - Drag-based edge mode?  (can we reverse back through a line to undo parts?)
      - [IF vertex-state] Vertex state (pop up ... some view of options?)
      - [IF face-state] Face state (pop up view with on/off for each?)
  - 
  - Misc Solvers [see solvers.md]
  - "Solver config" for auto-solve, generation, hint choice, etc.
  - Constrain "solve" to actions within a certain region (e.g. zoom in, ask "how does it solve this?")
    - Hint in region? Solve in region?
  - Run "final solve" when fully solved (so it gets all the state in final form, and no hints will run).
  - Enable "validation" as part of TSolver.nextAction? (how to easily do this?)
  - See the "enable visual highlight bits" that PhET sims have?
  - RUNNING INTO ISSUES STUFFING THINGS IN LOCAL STORAGE?
    - Storage api: https://developer.mozilla.org/en-US/docs/Web/API/Storage_API
  - Delay puzzle string save by a frame, it is taking a bit to deflate right now.
  - Move "Face Value Style" setting top-level?
  - INTERNALLY for every case where the user "fixes" something broken, we will rewind to before they made a mistake, and then re-apply all actions except for changing that one
    - If it's still broken, it is still broken.
  - Board face coordinate display?
  - Full correctness:
    - Buggy solver: Instead of FaceColorPointer, have colors associated with a board object (for deserialization and equality)... only if our actions return the same ones? Hmmm...
    - More error detection in solvers (to avoid infinite loop issues)
  - TO set an X... user presses one finger down elsewhere, THEN presses on edge?
  - Abstract way to say "when" something should be made dirty (e.g. { face: face => ..., edge: edge => ... })
    - Base Solver class
  - Bugs:
    - App broken when reloading on broken state?
  - OMG... for our hint, we'll actually want to show MULTIPLE actions, all of the ones that lead up to an edge being set?
    - We'll want to minimize the number of actions. From the "end", start going back trying to remove actions, and see if it can deduce the next thing
  - Actions for face color changes... should potentially specify the faces? Bleh not sure, is tricky how to serialize
    - If they don't... the face color IDs might change.
  - Autosolver should always go "until error detected" (whether our input is valid or not)
    - Just use the validator when we "should" have no errors?
  - Serialization of actions.... is a mess. Clean up, so we can serialize them and the stack (undo possible after reload)
  - Switch to ABSwitches (toggle switches) for configurations
    - https://blog.uxtweak.com/checkbox-vs-toggle-switch/ notes they are for "immediate effect" - which they are, checkboxes are delayed effect
  - Move more parts of files out to the top level (hard to find things!)
  - TPuzzle improvements (Property is awkward)
  - Settings:
    - Style preview in settings? (demo puzzle)
  - AnnotatedAction
    - noting the "required" parts of the pattern, and noting the "changes"
      - So that if we encounter a buggy thing, we can see what it was trying to do
  - Hint
    - do better than second-press to apply (switch... text in it?)
    - Highlight button differently when there is a hint to apply?
    - Allow user to order solvers for hints?
    - restrict to zoomed-in region?
  - History + Hint/Solve
    - Group annotations by what they change
    - Could we... have the "solve with engine" button... add to the history, without going forward?
      - Have a "history" bar on left, that shows each action?
        - We WANT RICH TEXT for this... text wrapping...
        - Figure out a "composite" annotation, we'll need it
          - e.g. for showing the "auto-solve" parts of something?
  - Generation / difficulty [see generation.md]
  - Inspect an area and SAT-solve it to see if it can be independently solved on its own.
  - Stronger "white lines" when using face colors?(?) - how to handle UI
  - Code cleanup
    - Have TEdge mimic BaseEdge's API, etc. (they define the interface)
  - Face Coloring UI
    - ColorDuals with same hue, but different light/dark values
      - [probably no, try light/dark first] Try cross-hatching instead of just dark? (hatched in different directions?)
    - [color per group helps this] Highlight the regions/border for the "connected" and "unconnected" parts of face colors
      - Border inset?
        - Dash pattern along the inside of groups? Dash colors?
    - [color per group helps this] HELPS with "loop" hunting too:
      - "Connected component" visualization? (e.g. all faces that are connected by a black/red)
        - If we stroke/fill this, we'd need to write that "tracing" of outside boundaries (that we'll use for hex)
      - "Seam" visualization? (e.g. lines between connected components)
    - Mode for viewing colors, with link-lines to connect disconnected opposite colors
    - [color per group helps this] Hard to visualize OPPOSITE colors with... all the noise
      - Better way of HARD showing disconnected opposite colors? 
    - Face coloring by value (monochrome?) - give speckled pattern for blank board
      - Slight background color change for each cell (for tilings), based on ... the tactile-js coloring?
        - NO, just use our force-directed style
    - Consider a texture for "inside" and "outside"
    - Different visualization modes (for face colors)? Where dual nature of borders are highly emphasized?
  - Interface:
    - Possibilities
      - Minimap when zoomed in (DAG it, but unpickable)... 
      - SLICK animation(!)
        - Use Twixt damped animation! 
        - Animate transitions to generation / puzzle start / puzzle end (TransitionNode?)
          - Smooth animations between things ... instead of "New", have a main menu?
        - Can we make it more intuitive by having the line animate?
        - Option for no animation, or animation speed
      - Buttons 
        - RAINBOW COLORS on the buttons
        - Zoom (in/out) for help on desktop (e.g. with mouse)
          - Show these only if the control bar is large enough!!
        - Solve button (solve everything as one action, or solve but put each step on stack, OR solve just one action)
          - Will apply "history" state for EACH solve step
          - OR WILL APPLY IT AS ONE THING ---- we might want each
        - Share/export button
          - Puzzle text (faces, faces/edges, in different formats)
          - Image (hey... can we use Alpenglow for the high-quality bits?)
        - Mark/save (for user "exploration")
          - Show "history display" so the forward/backward/ undo/redo/etc. make sense, ESPECIALLY once we have mark
      - Vertex coloring (e.g. spikes/incident, but also "all of the cases")
      - Loop (around square parity), but also maybe a "loop tool" where if you draw it, it will count automatically.
      - Area coloring (with specific known-inside or known-outside coloring, but also color other multiple-square areas)
        - blue/yellow (from the path tracing demo) for inside/outside default? 
        - ACTUALLY shades of gray? if we are coloring lines. we don't want too much color overload
        - DO MOUSE OVER?
        - Would it... be REALLY pretty to average colors out?
      - Color face values by the number of edges on the face? (a 2-of-3 is different than 2-of-4) - only relevant for certain patterns
      - Line coloring: highlight endpoints/line when over it? (like make the endpoints NOTABLE in case of color similarity)
      - Add config for press styles (but also figure out other input methods - e.g. dragging multiple lines)
        - Hey, how would dragging multiple lines work with pan? EXCLUSIVE SETTING
        - What about "quick double press" for x?
      - If RED on all 4 of a vertex, perhaps we can remove vertex dot?
      - Have PatternExplainers that we can display to show what we can deduce next
      - IDEALLY we should have a good way for "touch" to input Xs. Maybe a "shift"-equivalent button? 
        - An "inverse" or "X" sticky button at the top? 
      - Vertex interaction (note incident or spike? - or any of possible vertex states?)
        - Allow a "mark save point" (that can be jumped back to)
      - 3d appearance visual style? Add some depth (edges/lines as walls?)
      - Highlights of vertex ends of regions?
      - Long-press behavior somehow?
      - Highlight errors with "what went wrong"
  - Share URL size:
    - Store "board generation string" on a TBoard
      - Consists generally of "which generator" + "which parameters", but also our scanner will need to output (e.g. square?)
      - Have a specification for this!
    - When we have that, store faces as a simple string (and compress)
      - Also, edges in order, can specify edge state IN A SIMILAR MANNER
    - MINIMIZE the format of boards (so we can stuff custom-boards into fairly short URLs) 
  - import format from https://www.kakuro-online.com/slitherlink/
  - import allow paste of image, https://web.dev/patterns/clipboard/paste-images
  - Rule display (in UI), so we can have a good example of "just display some state" (without input), but potentially allowing animation?
  - Google Analytics (and fix for site? GA4?)
  - Immutable views
    - Would be great for an "explainer" page (this would be fun to write up)
  - Mobile issues:
    - HANDLE the annoyance that is "trying to tap multiple things" while auto-solve is active (and messes with the 2nd action)
    - Don't allow panning outside of the "region" (can go far to left/right on vertical puzzle)
    - Autosolve annoyance on mobile:
      - Prevent user from changing auto-solved edges immediately (?)
      - Autosolve Delay? - (allow for putting in multiple things (e.g. multiple lines) or switching to Xs?)
        - Presumably after a delay, replace the current stack state (with action and simple change) with an autosolved change
        - TAG stack transitions (puzzle snapshot) with what autosolver has been applied
    - On victory, animate to zoom out fully (how to do that)?
    - AnimatedPanZoomListener seems a bit clunky at the start. Faster hook?
  - Annotated errors
    - Subtype InvalidStateError - for simple ones especially, we can visually report on the issue
    - Autosolver JUST to check for simple errors (or in general)
      - [NEEDS] annotated errors 
      - e.g. toss the action of the SimpleFaceSolver/SimpleVertexSolver, just look for errors thrown
  - FILE SIZE improvements:
    - If we cut scanURL (and iframe-load it to compute)... we go from gzip 4MB => 0.67MB
    - If we attempt to do a dynamic import (in NewNode):
          TypeError [PLUGIN_ERROR]: [vite:load-fallback] Could not load vite/preload-helper (imported by src/view/NewNode.ts): The argument 'path' must be a string or Uint8Array without null bytes. Received '\x00vite/preload-helper'
              at open (node:internal/fs/promises:586:10)
              at Object.readFile (node:internal/fs/promises:1037:20)
              at Object.load (file:///Users/jon/phet/git/slither/node_modules/vite/dist/node/chunks/dep-jDlpJiMN.js:66605:43)
              at async PluginDriver.hookFirstAndGetPlugin (file:///Users/jon/phet/git/slither/node_modules/rollup/dist/es/shared/node-entry.js:19479:28)
              at async file:///Users/jon/phet/git/slither/node_modules/rollup/dist/es/shared/node-entry.js:18650:33
              at async Queue.work (file:///Users/jon/phet/git/slither/node_modules/rollup/dist/es/shared/node-entry.js:19689:32)
  - Exterior UI (improved "new" popup, etc.)
    - We have the puzzle/solver Node
    - TRANSITION swipe animation, like game screens
    - Have tutorial, rules, options, etc.? Better scaffolding
  - AutoSolve rule presets - WHAT IS RELAXING / fun
    - "rules that only set red edges" might be relaxing
  - "Error on startup" detection
    - clear puzzleString first? if not set, clear localStorage?
    - set a flag in localStorage noting that it was cleared (so we can display a message?)
    - force the reload
  - Create "helper" methods for things with interfaces. (Can we add implementation to an interface?)
    - We want to give anything implementing the interfaces multiple helper methods... is that just abstract classes? 
    - TODO: I need to read up more on TypeScript
    - Just... use top level methods for now...?
      - HEY! Put each interface into a file, and then PUT FUNCTIONS THAT USE IT in the same file
  - Mobile vs Desktop
    - Settings presets for each?
    - OR detect fingers/mouse and apply different rules for them?
    - BASICALLY just try out both a bunch (phone, touch-pad, mouse)
  - Accessibility
    - Fix up modal a11y, see how it works/looks (look into dialog/popupable, see what they give it)
    - Let's get accessibility highlights a bit more refined-acceptable looking? 
    - Keyboard
      - Keyboard + Accessibility is first-class? (Could be fast for input on a computer) 
    - Allow selecting a square. Hear its number/sides, manipulate its sides ("space blank, lines on top and left, blank on bottom, x on right")
    - Allow going through a vertical check list box easily?
  - Potentially "animate in" auto-solved things, and clicks don't do anything during the fade in(!)
    - THIS IS ANNOYING ON MOBILE 
    - Or at least have a delay
  - Background behind navbar? (so navbar can have its own transparency?) hmmm
  - Annotated solver actions (to show what happens next) <- omg, what if we animate this? (flash what it sees, then what it does)
    - PUZZLE SOLVING VIDEOS or ANIMATIONS would be really neat!!! - could it put these on YouTube (with text/annotations), people could pause if they don't see/understand?
  - Check when solved - we only have one chain + all numbers satisfied
  - NUMBER ONLY rules (at the start)
    - Most of these would be pattern based. Maybe get pattern solver working first (it's noted above)
  - FAST FAST solver setup for computer backtracking (to determine if a puzzle is valid/unique, useful for scanner)
  - Show puzzle loading progress (and speed it up), mobile is annoyed. Do error detection
  - USE ALPENGLOW??? --- and specify font (we can embed the glyphs no?)
  - Try hex boards (or other shapes) -- actually, this will be useful for testing any "general" solvers, and making sure I've abstracted enough logic?
  - https://vite-pwa-org.netlify.app/ - PWA this so I can have it on my phone
    - https://github.com/richardtallent/vite-plugin-singlefile
  - Audio for actions
    - Might help cue on unintended actions
  - Localization / Internationalization
  - Difficulty estimation of puzzles:
    - Should all solvers give the difficulty?
    - Should all solvers be designed to work so they can be re-run without applying the action? YES, right?
    - Should all solve actions - have a "difficulty" rating?
    - Single-level backtrack for "what state can we combine" - if we can't find explicit rules?
  - Allow puzzle export
    - navigator.share(), can share images, https://stackoverflow.com/questions/68362603/share-image-via-social-media-from-pwa
    - String formats?
  - [DEFER] Save full PuzzleModel state (serialize actions and stack)
  - Puzzle editor
    - HOW does this integrate with the current board generator? 
    - Delete or manipulate faces from the board (e.g. from board generation)
    - Set values of faces manually
    - Feature to "add in other numbers" based on solver?
  - Board Generation:
    - Consider NumberSpinner instead of NumberControl? 
    - Import from SVG string? 
    - Hide some boards behind "show experimental"? 
    - Add in rotation for tilings/others? integer prop, 0-360 (because people are used to degrees?)
    - Tick marks on sliders?
    - Consistent preview stroke size (prescale?)
    - Instead of our current "radius cutoff", perhaps find a central vertex or face, and measure "adjacency distance" from it!!!
      - Either "within grid", "by centermost vertex", "by centermost face"
    - Allow the user to "save" boards (and name them - see text entry?)
  - Lazy initialization of all of the tiling data?
    - Each tiling can be instantiated
    - Each tiling can just be used to either (a) create all of its polygons, or (b) create polygons to fill bounds
  - Demo videos?:
    - topological view
    - face coloring
  - Improved name:
    - Looperoo?
      - (slitherlink-inspired), lichess of slitherlink?

- Write up:
  - Force-directed graph layout (techniques for planarity?)
  - Force-directed color layout (region and face)
  - Solving techniques (visualized)

- Rule generation / display
  - SAT solver tweaked for the exact constraints(!!!!) 
  - Show a full explainer (with immutable views of puzzles)
    - !!! Not popular enough to NOT have an explainer. 
    - Link off to full databases of patterns 
  - How can we detect/visualize highlander rules?
  - Show rules with a nice before/after(!) - have the ability to generate that into a Scenery node. Use Display in write-up
  - For many rules, showing the "candiate test-add", "consequences", "thus we can assume this" as the three stages is nice.
  - Grab rules from my discord paster
  - Show the "next rule" that can be applied (and why) - consider TAnnotatedAction?
  - In Rule Description (auto-solver) describe the rule there with images? Possibly animate it?

- Read / Watch
  - https://link.springer.com/chapter/10.1007/978-3-030-34339-2_8 
  - check r/slitherlink for more cases that were explained well!
  - Look up things under https://puzzling.stackexchange.com/search?q=slitherlink
  - Face Coloring Solving Watch https://www.youtube.com/watch?v=PLdZwjs3mzQ to see if there are good tips, also https://www.youtube.com/watch?v=FU_xW8n-jzo

- Testing
  - Use seedRandom setup so we can get reproducibility.

- Performance
  - Web workers(!) - particularly for minisat
  - Unassert: https://github.com/unassert-js/rollup-plugin-unassert
  - Avoid animating anything outside-of-viewport?
  - Puzzles are SLOW on mobile, and scrolling is ugly. Perhaps we could use a separate Scenery display for the puzzle, and a separate one for the UI?
  - Assertion removal with unassert isn't... applying much so far. TODO check
    - unassert isn't stripping our assertions!
    - See https://github.com/unassert-js/rollup-plugin-unassert and https://github.com/unassert-js/unassert
  - Bit-pack states (especially for square edge/face/etc.) - have a linear array based on logicalCoordinates.
  - Not great performance on: 80x50 ..2223.1...3.2..31..1.0.2.2..2..22..1.32...211.3..23.22232..2.3..2..11..2.2212....1322.2.1..00....1...2..31.11.12..1.1.1.12...0..322.1..1..210..22.2..2.22.1.0..1.11..10.1.....3.22.3.01...22..22111..3..221...3....3..2...11.1.3.3...12.120...2.3.00....2.3..11.1..2.0.21..2..21.0..1.2.2.1.3.110....2.223.32..1...2...1...1311..1..1...33.....3..3..1..2...110..2.0.2.2..121......222212.1.....3..3.0.3.1..2...22..1.1.2.1.1111.1.1.3112........20133.2..3...2.11.311.2....12.....0...02.1.22.1.101....2.2.3.332..1...13..2..32.3....12.0.12.012.131...201..102..321...2.2.0.11..21212.2....1....2123..1.3..0..2.1...1...1....2.....01.2...1....11....3.13.2.1.3...1..0..11...2..2.22.3..2.32..3.1..1.0223.22.22..3.3..1..211.3....3....32....31..0...1.2111.13123.......223..2..21...23....02..1...11..1.012..1.1.0.......1...1..10222.....3.3..2.2..3.2.122.2..1..0.3.213...22.......120...2221.1.321..3..21..11...22.2..0.111.3122.2...2.....211...1.....31..2.223......21.........131.1.2021..112.3..12..1..3.2.22...22..201...0.2........0.2.12..0.3.23.2.111.3.10...12...12.2131..1....3..2..21..212..2...12.2....3.133.2.1112.........211.....1.1..31..1..1.3..22.201..111.2.2..1.1.0..3..0.....11..2..2...2.1.22.23..2....10..1.21.11.......2..3.3...13.2322...31..........1.0.32.2....211..0..21.2.10.2..1..0..2...1..31..2.122..22...3...223.12..31...33...2..1.2..0.20.1.3..1.......0.12.....02...222.23.3.122.2.....23.20...20...1..0..101.32......21..0.03.22130.00..32.31...3..0...11.1..0.2.123.2..13.1....1.20..1.3...21..1.33.32...1...2.1.3...31...22231.131.2...1232..211..223222..22..3.01..1.0..1.....3....1.0.3..2121.21..12..10.2....2.1.132..12..1..2........3.212.....01.1..2..22..1113.1.122..1...21...3.1..121112.3...1..22.2..1323202.2.2.1..13..2...23...2132.32.....2.1.2.2.21.1.12..01.21....1..12......013...20..1212..0..211...3..001.112...11...2.13221..2.23..13..3.1111.1.22.132..........1.22..11...12...1.2..1.01..131.1...21.2...12.2...........12...0.231...2.20.2.1.1..311..2.3..22201.12233..33..1..212.10.12.3.3....3.....21.2....21..2022..3.0..2..0..2.2.2.0.222.1....1..1...1.1.1.........11..0122.2111..02.3..0....1..3.1....2..23...3...2..11.2.112232.2.1..21.232.22.1..11....122.2..21.3.2.2.11121...21.0..1.11.2..13..22.2.1......210131...22.1.10....3.32.2.3210.......2..31.....213.1..12...131...02.12...122.........3.22.1.1..1232.1..1.0.2112..2...32..0.3.2..2.1..1..03..11..32.2..21.....0..11.3.222..1.1112.1.2.21...1.1.2..000...3.2.1....2...32..3.1.....2.2.1.2.3.21210..31...133.2.22...1.2.2.31....1.......1.122...01.1.223..2..1.3.3.220...2.0..221..1..322.12221...2.111.23.2...32.13..2..20..2.10.3.1.......20122..2.3...3..1...20.0...1....1..1.112.2..1.02..2..213..2..2.2.2.0....12..3......22.......31..1...2..1132220..2.12.2...21...3..1212...201...1221...23.3...133..0....2.11.1..3.0.222221.........1.22...22323..10.11...221111.2..1...1.13.211.0..1.1212.231........1.1..2.12.221..2.3.1.2..1.0....1222......2...11.3.......1...232.....2..2.10.0..3.2..21.013.3.3.212...3.1.2..022.2....2.3..0...31..0111...10..11.1.2.21..22..2....1..2.32.1.......1.1...2.13.......22.22...2.1..1.0..1.10.0...1.1102..201111213.12..322.2.2.....2.1..2.3.1...11.32.1...2..1.1.3.0..0.....1.22213...22....2....20...2..3.1.2..1.31310.0.2..1.1......23.223..1..3.12..213.3..1.3...1.0..1....3..2...12.21.13..2.....2....1...30.3.31......1.220.3.2..1.....13..22...0....13......1.21.2..0..23..311..20..33.1...1..312.3.32..2..1.22...3.23222...1.02.20.2....0.21..1.31..0.2..3.12.2.1.1...2.0.1.1..3....3..21....222.1....12112.......02.3..1.2..2213...1...0112..2..23.....1.3..13...011......22...0.2.1..3....112.3..3..1..3...1.2.121.01........2..1.1221....2..3.02.231130..223..2332....2013....10......3.2..22...0..112...2..11...21.1..1.1........2..10.1.3.3.....311.1.......101223...23....222.3..1...3.1.12...12..0...1.3.3...32..112......13..22..32.112..2.1..2.21.02111...2..222.3.0..112.0...33.12.0....1.....1...1323.2..13..2112.21.1222..221.11..23.132..3...3...1..2.........0.1..1.22.10..0..2...1.0....0..2...22.3.3.1.311.2..1..2.2212..1..1..1332223.0.....21..0...3.12
- 
- Maintainability
  - Prettier
  - At a certain point, cut features and clean clean 
  - Separate out structure.ts into a structure directory
  - Make clean! Document things!
  - Add copyright statement to files at some point
  - Try VSCode

- Scaffolding
  - "Each number needs to have that many edges/lines around it, and no more"
  - "Single loop, like a loop of string"
  - Use coloring and description like in https://ciechanow.ski/airfoil/
  - See https://meganesulli.com/blog/paper-mario-tutorial/
